<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Add Money</title>
  <style>
    body{font-family:Arial,sans-serif;margin:0;padding:0;background:#fff;}
    .header{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #eee;}
    .continue{color:#00b894;font-weight:bold;cursor:pointer;}
    .container{padding:15px;max-width:540px;margin:auto;}
    .form-group{margin-bottom:20px;}
    label{font-weight:bold;margin-bottom:6px;display:block;}
    input[type="text"]{width:100%;height:50px;border:2px solid #00b894;border-radius:12px;padding:0 15px;}
    .custom-select{position:relative;}
    .select-selected{border:2px solid #00b894;border-radius:12px;height:50px;display:flex;align-items:center;gap:10px;padding:0 12px;cursor:pointer;}
    .select-selected img{width:30px;height:30px;border-radius:50%;}
    .select-items{position:absolute;top:110%;left:0;right:0;background:#fff;border:2px solid #00b894;border-radius:12px;display:none;z-index:10;}
    .select-items div{padding:10px;display:flex;align-items:center;gap:10px;cursor:pointer;}
    .select-items div:hover{background:#f6f6f6;}
    .select-items img{width:30px;height:30px;border-radius:50%;}
  </style>
</head>
<body>
  <div class="header">
    <a href="#">&lt; Add Money</a>
    <span class="continue" id="continueButton">Continue</span>
  </div>

  <div class="container">
    <div class="form-group">
      <label>Amount</label>
      <input id="amount" type="text" placeholder="Input The Amount">
    </div>
    <div class="form-group">
      <label>Sender Name</label>
      <input id="sender" type="text" placeholder="Input Sender Name">
    </div>
    <div class="form-group">
      <label>Bank Name</label>
      <div class="custom-select" id="bankSelect">
        <div class="select-selected">
          <img id="selectedLogo" src="https://i.ibb.co/vq4t5PS/palmpay.png">
          <span id="selectedText" data-bank="Palmpay">Palmpay</span>
        </div>
        <div class="select-items" id="bankItems">
          <div data-bank="Palmpay"><img src="https://i.ibb.co/vq4t5PS/palmpay.png"> Palmpay</div>
          <div data-bank="Opay"><img src="https://i.ibb.co/vXtcz4f/opay.png"> Opay</div>
          <div data-bank="Moniepoint"><img src="https://i.ibb.co/QQb5t2q/moniepoint.png"> Moniepoint</div>
        </div>
      </div>
    </div>
  </div>

<script>
const selected = document.querySelector('.select-selected');
const selectedText = document.getElementById('selectedText');
const selectedLogo = document.getElementById('selectedLogo');
const items = document.getElementById('bankItems');
selected.addEventListener('click', ()=>items.style.display= items.style.display==="block"?"none":"block");
items.querySelectorAll('div').forEach(div=>{
  div.addEventListener('click', ()=>{
    selectedText.textContent=div.textContent.trim();
    selectedText.dataset.bank=div.dataset.bank;
    selectedLogo.src=div.querySelector('img').src;
    items.style.display="none";
  });
});

// Register service worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js").then(()=>console.log("Service Worker registered"));
}

document.getElementById('continueButton').addEventListener('click', async ()=>{
  const bank = selectedText.dataset.bank;
  const amount = document.getElementById('amount').value.trim();
  const sender = document.getElementById('sender').value.trim();
  if(!amount || !sender) return alert("Enter amount & sender name");

  const notifications = {
    "Opay": {
      title: "Opay • Incoming Transfer Successful",
      body: `DAILY PAY has sent you ₦${amount}.\nGet up to 6% bonus on OPay Airtime.`,
      icon: "https://i.ibb.co/vXtcz4f/opay.png"
    },
    "Palmpay": {
      title: "Palmpay • Interbank Transfer",
      body: `You received NGN ${amount} from ${sender}.\nEarn Up to ₦100,000 Cash per transaction!`,
      icon: "https://i.ibb.co/vq4t5PS/palmpay.png"
    },
    "Moniepoint": {
      title: "Moniepoint • Credit Alert",
      body: `You have just received NGN${amount} from ${sender}.`,
      icon: "https://i.ibb.co/QQb5t2q/moniepoint.png"
    }
  };

  const notif = notifications[bank];
  if(Notification.permission !== "granted"){
    await Notification.requestPermission();
  }
  if(Notification.permission==="granted"){
    navigator.serviceWorker.ready.then(reg=>{
      reg.showNotification(notif.title, {
        body: notif.body,
        icon: notif.icon,
        badge: notif.icon,
        vibrate:[200,100,200],
        data:{url:"/"}
      });
    });
  }
});
</script>
</body>
</html>
